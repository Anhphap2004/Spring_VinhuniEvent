<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout/base}">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}"></title>
    <style>
        /* CSS t√πy ch·ªânh cho form */
        :root {
            --primary-color: #007bff;
        }

        .main {
            padding-top: 2rem !important;
            padding-bottom: 2rem !important;
            background-color: #f8f9fa; /* N·ªÅn nh·∫π */
        }

        h1 {
            color: #343a40;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-card {
            max-width: 600px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông cho form */
            margin: 0 auto;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
            border: none; /* B·ªè vi·ªÅn c≈© */
        }

        /* T√πy ch·ªânh input/select */
        .form-control, .form-select {
            border-radius: 0.25rem;
        }

        /* N√∫t */
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-secondary-custom {
            background-color: #6c757d;
            border-color: #6c757d;
            color: #fff;
        }

        .form-section-title {
            color: var(--primary-color);
            font-weight: bold;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            padding-bottom: 0.2rem;
            border-bottom: 1px dashed #ced4da;
        }

        /* C·∫£nh b√°o m·∫≠t kh·∫©u */
        .password-note {
            font-size: 0.875rem;
            color: #6c757d;
        }
    </style>
</head>
<body>
<div layout:fragment="content" class="main container-fluid">
    <h1 th:text="${pageTitle}">üë§ Th√™m/Ch·ªânh s·ª≠a Ng∆∞·ªùi d√πng</h1>

    <div class="card form-card">
        <div class="card-body">
            <form th:action="@{/admin/users/save}" method="post" th:object="${user}">

                <input type="hidden" th:field="*{user_id}" />

                <div class="form-section-title">Th√¥ng tin t√†i kho·∫£n</div>

                <div class="mb-3">
                    <label for="email" class="form-label">Email <span class="text-danger">*</span>:</label>
                    <input type="email" id="email" th:field="*{email}" required
                           class="form-control"
                           th:readonly="${user.user_id != null}"
                           placeholder="a.nguyen@vinhuni.edu.vn" />
                    <div th:if="${user.user_id != null}" class="form-text text-muted">
                        Email kh√¥ng th·ªÉ thay ƒë·ªïi sau khi t·∫°o.
                    </div>
                </div>

                <div class="mb-3">
                    <label for="fullName" class="form-label">H·ªç v√† T√™n <span class="text-danger">*</span>:</label>
                    <input type="text" id="fullName" th:field="*{full_name}" required class="form-control" />
                </div>

                <div class="mb-3">
                    <label for="passwordHash" class="form-label">M·∫≠t kh·∫©u m·ªõi:</label>
                    <input type="password" id="passwordHash" th:field="*{password_hash}" value=""
                           class="form-control"
                           th:required="${user.user_id == null}" />
                    <small th:if="${user.user_id != null}" class="password-note">
                        * ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng mu·ªën thay ƒë·ªïi m·∫≠t kh·∫©u hi·ªán t·∫°i.
                    </small>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="role" class="form-label">Vai tr√≤ (Role) <span class="text-danger">*</span>:</label>
                        <select id="role" th:field="*{role}" class="form-select">
                            <option th:each="role : ${roles}"
                                    th:value="${role.role_id}"
                                    th:text="${role.role_name}"
                                    th:selected="${user.role != null and user.role.role_id == role.role_id}">
                                T√™n Role
                            </option>
                        </select>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="isActive" class="form-label">Tr·∫°ng th√°i Active:</label>
                        <select id="isActive" th:field="*{is_active}" class="form-select">
                            <option value="true">‚úÖ Active</option>
                            <option value="false">‚ùå Inactive</option>
                        </select>
                    </div>
                </div>


                <div class="form-section-title">Th√¥ng tin c√° nh√¢n & H·ªçc thu·∫≠t</div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="studentCode" class="form-label">M√£ Sinh vi√™n:</label>
                        <input type="text" id="studentCode" th:field="*{student_code}" class="form-control" placeholder="SVXXXXXX" />
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="phoneNumber" class="form-label">S·ªë ƒëi·ªán tho·∫°i:</label>
                        <input type="tel" id="phoneNumber" th:field="*{phone_number}" class="form-control" placeholder="090-123-4567" />
                    </div>
                </div>

                <div class="mb-3">
                    <label for="birthDate" class="form-label">Ng√†y sinh:</label>
                    <input type="date" id="birthDate" th:field="*{birth_date}" class="form-control" />
                </div>

                <div class="mb-3">
                    <label for="faculty" class="form-label">Khoa:</label>
                    <input type="text" id="faculty" th:field="*{faculty}" class="form-control" />
                </div>

                <div class="mb-3">
                    <label for="major" class="form-label">Chuy√™n ng√†nh:</label>
                    <input type="text" id="major" th:field="*{major}" class="form-control" />
                </div>

                <div class="mb-3">
                    <label for="imageUrl" class="form-label">URL ·∫¢nh ƒë·∫°i di·ªán:</label>
                    <input type="text" id="imageUrl" th:field="*{imageUrl}" class="form-control" placeholder="http://example.com/avatar.jpg" />
                </div>


                <div class="pt-3 border-top mt-4 d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary me-2">
                        <i class="bi bi-save-fill"></i> üíæ L∆∞u Ng∆∞·ªùi d√πng
                    </button>
                    <a th:href="@{/admin/users}">
                        <button type="button" class="btn btn-secondary-custom">
                            <i class="bi bi-x-circle-fill"></i> ‚úñÔ∏è H·ªßy b·ªè
                        </button>
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>