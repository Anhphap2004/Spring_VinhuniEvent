<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout/base}">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω Ng∆∞·ªùi d√πng</title>
    <style>
        /* CSS t√πy ch·ªânh */
        :root {
            --primary-color: #007bff; /* M√†u xanh d∆∞∆°ng ch·ªß ƒë·∫°o */
            --success-color: #28a745;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --warning-color: #ffc107;
            --light-bg: #f8f9fa;
        }

        /* ƒê·ªãnh d·∫°ng chung */
        .main {
            padding-top: 2rem !important;
            padding-bottom: 2rem !important;
            background-color: var(--light-bg);
        }

        /* Ti√™u ƒë·ªÅ */
        h1 {
            color: #343a40;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 0.5rem;
            font-weight: 600;
        }

        /* Th√¥ng b√°o */
        .message-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 15px;
            margin-bottom: 1.5rem;
            border-radius: 0.25rem;
            font-weight: 500;
        }

        /* N√∫t th√™m m·ªõi */
        .btn-add-new {
            margin-bottom: 1rem;
            font-weight: 600;
            padding: 0.5rem 1rem;
        }

        /* B·∫£ng */
        .table-custom {
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
            background-color: #fff;
            border-radius: 0.5rem;
            overflow: hidden; /* Quan tr·ªçng ƒë·ªÉ bo g√≥c b·∫£ng */
        }

        .table-custom thead th {
            background-color: var(--primary-color);
            color: #fff;
            vertical-align: middle;
            border-bottom: none;
            padding: 1rem 0.75rem;
            font-weight: 600;
        }

        .table-custom tbody tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .table-custom tbody tr:hover {
            background-color: #e9ecef;
            cursor: pointer;
        }

        .table-custom tbody td {
            vertical-align: middle;
            padding: 0.75rem;
        }

        /* Tr·∫°ng th√°i Active */
        .badge-active {
            display: inline-block;
            padding: 0.35em 0.65em;
            font-size: 0.75em;
            font-weight: 700;
            line-height: 1;
            color: #fff;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: 0.25rem;
        }

        .active-true {
            background-color: var(--success-color);
        }

        .active-false {
            background-color: var(--danger-color);
        }

        /* H√†nh ƒë·ªông */
        .action-links a {
            color: var(--info-color);
            text-decoration: none;
            margin-right: 0.5rem;
            font-weight: 500;
        }

        .action-links a:hover {
            color: var(--primary-color);
            text-decoration: underline;
        }

        .action-links .delete-link {
            color: var(--danger-color);
        }

    </style>
</head>
<body>
<div layout:fragment="content" class="main container-fluid">
    <div class="card shadow-sm">
        <div class="card-header bg-white">
            <h1 class="h3 mb-0">üìã Qu·∫£n l√Ω Ng∆∞·ªùi d√πng</h1>
        </div>
        <div class="card-body">

            <div th:if="${message}" class="message-success" role="alert">
                <i class="bi bi-check-circle-fill"></i> <span th:text="${message}">Th√¥ng b√°o s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y.</span>
            </div>

            <p>
                <a th:href="@{/admin/users/new}" class="btn btn-primary btn-add-new">
                    <i class="bi bi-plus-circle-fill"></i> ‚ûï Th√™m Ng∆∞·ªùi d√πng m·ªõi
                </a>
            </p>

            <div class="table-responsive">
                <table class="table table-hover table-custom">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>M√£ SV</th>
                        <th>H·ªç v√† T√™n</th>
                        <th>Email</th>
                        <th>Vai tr√≤ (Role)</th>
                        <th class="text-center">Active</th>
                        <th class="text-center">H√†nh ƒë·ªông</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="user : ${users}">
                        <td th:text="${user.user_id}">1</td>
                        <td th:text="${user.student_code}">SV001</td>
                        <td th:text="${user.full_name}">Nguy·ªÖn VƒÉn A</td>
                        <td th:text="${user.email}">a.nguyen@example.com</td>
                        <td th:text="${user.role != null ? user.role.role_name : 'N/A'}">STUDENT</td>
                        <td class="text-center">
                            <span th:classappend="${user.is_active ? 'active-true' : 'active-false'}"
                                  class="badge badge-active"
                                  th:text="${user.is_active ? 'C√≥' : 'Kh√¥ng'}">C√≥</span>
                        </td>
                        <td class="text-center action-links">
                            <a th:href="@{/admin/users/view/{id}(id=${user.user_id})}" title="Xem chi ti·∫øt">
                                <i class="bi bi-eye-fill"></i> Xem
                            </a>
                            |
                            <a th:href="@{/admin/users/edit/{id}(id=${user.user_id})}" title="Ch·ªânh s·ª≠a">
                                <i class="bi bi-pencil-square"></i> S·ª≠a
                            </a>
                            |
                            <a th:href="@{/admin/users/delete/{id}(id=${user.user_id})}"
                               onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ng∆∞·ªùi d√πng ' + '[[${user.full_name}]]' + ' n√†y kh√¥ng?');"
                               class="delete-link" title="X√≥a ng∆∞·ªùi d√πng">
                                <i class="bi bi-trash-fill"></i> X√≥a
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div> </div> </div> </div>
</body>
</html>